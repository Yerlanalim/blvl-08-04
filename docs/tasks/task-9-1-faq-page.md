# Задача 9.1: Реализация страницы FAQ

## Подготовка

Перед началом выполнения задачи, пожалуйста, ознакомьтесь с следующими документами для восстановления контекста:
- [Концепция проекта](../docs/bizlevel-concept.md)
- [План разработки](../docs/development-plan.md)
- [Текущий статус проекта](../docs/status.md)

## Описание задачи

Необходимо создать страницу FAQ (Frequently Asked Questions) в приложении BizLevel, где пользователи смогут находить ответы на часто задаваемые вопросы. Страница должна иметь удобную структуру, возможность поиска и аккордеоны для отображения вопросов и ответов.

### Шаги выполнения:

1. **Создание таблицы faq в базе данных:**
   - Разработать и применить миграцию для создания таблицы faq в Supabase
   - Настроить поля таблицы (id, category, question, answer, order_num, etc.)
   - Настроить RLS-политики для доступа к данным FAQ
   - Добавить несколько тестовых записей для разработки

2. **Реализация загрузки данных FAQ из базы:**
   - Создать сервис для работы с данными FAQ (faqService)
   - Реализовать методы получения всех FAQ или по категориям
   - Добавить кеширование данных для оптимизации загрузки
   - Настроить обработку ошибок при загрузке данных

3. **Разработка компонентов для отображения вопросов и ответов:**
   - Создать страницу `/app/(dashboard)/faq/page.tsx`
   - Разработать компонент FaqAccordion для отображения вопросов и ответов
   - Реализовать группировку FAQ по категориям
   - Добавить визуальные элементы для улучшения восприятия
   - Настроить анимацию раскрытия/сворачивания ответов

4. **Добавление поиска по FAQ:**
   - Реализовать компонент поиска по FAQ
   - Добавить функционал фильтрации вопросов по поисковому запросу
   - Настроить подсветку найденных совпадений
   - Реализовать показ релевантных результатов при поиске

## Структура таблицы faq

```sql
CREATE TABLE faq (
  id SERIAL PRIMARY KEY,
  category TEXT NOT NULL,
  question TEXT NOT NULL,
  answer TEXT NOT NULL,
  order_num INTEGER NOT NULL DEFAULT 0,
  is_published BOOLEAN NOT NULL DEFAULT true,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ
);

-- Индекс для поиска
CREATE INDEX faq_category_idx ON faq(category);
CREATE INDEX faq_question_text_idx ON faq USING gin(to_tsvector('russian', question));

-- RLS политики
ALTER TABLE faq ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Public read access to published FAQ"
  ON faq FOR SELECT
  USING (is_published = true);
```

## Дизайн страницы FAQ

Страница FAQ должна состоять из следующих элементов:
1. **Шапка страницы:**
   - Заголовок "Часто задаваемые вопросы"
   - Поле поиска по вопросам
   - Краткое описание раздела

2. **Навигация по категориям:**
   - Горизонтальные табы или вертикальный сайдбар с категориями
   - Индикация текущей выбранной категории
   - Возможность показать все вопросы

3. **Список вопросов и ответов:**
   - Аккордеоны с вопросами и раскрывающимися ответами
   - Визуальная индикация открытого/закрытого состояния
   - Возможность открыть несколько вопросов одновременно

## Проверка работы

Для проверки корректности реализации страницы FAQ выполните:
- Тестирование отображения всех категорий и вопросов
- Проверка работы аккордеонов и анимаций
- Тестирование поиска по различным запросам
- Проверка адаптивности на разных устройствах
- Тестирование скорости загрузки и производительности

## Ожидаемый результат

- Созданная таблица faq с тестовыми данными
- Функциональная страница FAQ с аккордеонами для вопросов и ответов
- Удобная навигация по категориям
- Работающий поиск по вопросам с подсветкой результатов

## Дополнительные материалы

- [Дизайн аккордеонов в Shadcn/UI](https://ui.shadcn.com/docs/components/accordion)
- [Тектовый поиск в PostgreSQL](https://www.postgresql.org/docs/current/textsearch.html)
- [Работа с Markdown в React](https://github.com/remarkjs/react-markdown)
- [Примеры UI для FAQ-страниц](https://dribbble.com/tags/faq_page)

## После выполнения

После завершения задачи не забудьте обновить файл [status.md](../docs/status.md) с информацией о реализованной странице FAQ, созданной таблице в базе данных и любых возникших проблемах при разработке функционала. 
# Задача 5.1: Интеграция видеоплеера

## Подготовка

Перед началом выполнения задачи, пожалуйста, ознакомьтесь с следующими документами для восстановления контекста:
- [Концепция проекта](../docs/bizlevel-concept.md)
- [План разработки](../docs/development-plan.md)
- [Текущий статус проекта](../docs/status.md)

## Описание задачи

Необходимо разработать компонент для отображения видео на странице уровня, интегрировать его с YouTube Player API для отслеживания просмотра и реализовать механизм сохранения прогресса просмотра видео в базе данных.

### Шаги выполнения:

1. **Разработка компонента VideoSection:**
   - Создать компонент для отображения секции с видео на странице уровня
   - Структурировать интерфейс с областью воспроизведения и информационной панелью
   - Добавить навигацию между видео в рамках одного уровня
   - Реализовать адаптивный дизайн для разных устройств и ориентаций

2. **Интеграция с YouTube Player API:**
   - Установить и настроить библиотеку react-player для взаимодействия с YouTube
   - Реализовать обработчики событий воспроизведения (начало, пауза, окончание)
   - Настроить отслеживание прогресса просмотра (процент просмотренного видео)
   - Реализовать сохранение позиции просмотра для возможности продолжения

3. **Создание логики для отметки просмотренных видео:**
   - Разработать функционал для определения просмотренных видео (например, 85% просмотра)
   - Реализовать обновление таблицы user_video_progress в Supabase
   - Добавить индикацию просмотренных и непросмотренных видео в интерфейсе
   - Реализовать обновление общего прогресса пользователя по уровню

4. **Загрузка и отображение списка видео для уровня:**
   - Разработать механизм получения списка видео для конкретного уровня из Supabase
   - Реализовать отображение списка видео с информацией о названии, длительности и статусе
   - Добавить сортировку видео по порядковому номеру
   - Реализовать механизм кеширования данных для оптимизации загрузки

## Рекомендации по реализации

- Используйте библиотеку react-player для интеграции с YouTube, она предоставляет удобный API для отслеживания событий
- Настройте параметры встраивания YouTube (например, отключение рекомендаций, элементов управления и т.д.)
- Для отслеживания прогресса реализуйте периодическое сохранение текущей позиции воспроизведения
- Учитывайте возможные проблемы с соединением и реализуйте механизм повторных попыток при сохранении прогресса

## Проверка работы

Для проверки корректности интеграции видеоплеера выполните:
- Тестирование воспроизведения видео из YouTube
- Проверка корректного отслеживания прогресса просмотра
- Тестирование сохранения позиции и возобновления просмотра
- Проверка обновления общего прогресса уровня
- Тестирование навигации между видео в рамках уровня

## Ожидаемый результат

- Функциональный компонент VideoSection для просмотра видеоконтента
- Корректно работающая интеграция с YouTube через react-player
- Механизм отслеживания и сохранения прогресса просмотра в базе данных
- Интерфейс для навигации между видео с отображением статуса просмотра

## Дополнительные материалы

- [Документация react-player](https://github.com/cookpete/react-player)
- [YouTube Player API](https://developers.google.com/youtube/iframe_api_reference)
- [Supabase JavaScript Client](https://supabase.com/docs/reference/javascript/supabase-client)
- [Web Media Engagement Patterns](https://web.dev/patterns/media/)

## После выполнения

После завершения задачи не забудьте обновить файл [status.md](../docs/status.md) с информацией о реализованном компоненте видеоплеера, интеграции с YouTube API и механизме отслеживания прогресса просмотра. 
# Задача 7.2: Страница доступных артефактов

## Подготовка

Перед началом выполнения задачи, пожалуйста, ознакомьтесь с следующими документами для восстановления контекста:
- [Концепция проекта](../docs/bizlevel-concept.md)
- [План разработки](../docs/development-plan.md)
- [Текущий статус проекта](../docs/status.md)

## Описание задачи

Необходимо создать отдельную страницу для работы со всеми доступными учебными материалами (артефактами) в приложении BizLevel. Пользователи должны иметь возможность просматривать список всех доступных артефактов, фильтровать их по уровням, скачивать файлы и отслеживать уже скачанные материалы.

### Шаги выполнения:

1. **Создание страницы со списком всех доступных артефактов:**
   - Разработать страницу `/app/(dashboard)/artifacts/page.tsx`
   - Создать компоненты для отображения списка артефактов в различных представлениях (список, сетка)
   - Реализовать загрузку данных об артефактах из Supabase с учетом прав доступа
   - Настроить пагинацию или виртуализацию списка для оптимальной производительности

2. **Реализация фильтрации артефактов по уровням:**
   - Создать компонент фильтрации для отбора артефактов по уровням
   - Добавить возможность поиска по названию или описанию артефакта
   - Реализовать сортировку артефактов (по дате, по имени, по размеру)
   - Добавить фильтр для отображения только скачанных/нескачанных артефактов

3. **Добавление возможности скачивания артефактов:**
   - Интегрировать скачивание файлов из Supabase Storage
   - Реализовать получение подписанных URL для безопасного скачивания
   - Добавить прогресс-бар для отображения процесса скачивания
   - Реализовать обработку ошибок при недоступности файлов

4. **Отслеживание скачиваний для статистики:**
   - Интегрировать отслеживание скачиваний с таблицей user_artifacts
   - Реализовать визуальную индикацию уже скачанных артефактов
   - Добавить метаданные о дате и времени скачивания
   - Настроить обновление статистики в профиле пользователя

## Структура страницы артефактов

Рекомендуемая структура страницы артефактов:
1. **Верхняя секция**:
   - Заголовок и краткое описание раздела
   - Фильтры и инструменты поиска
   - Переключатель режима отображения (список/сетка)

2. **Основная секция**:
   - Список/сетка артефактов с основной информацией
   - Индикаторы статуса (скачан/не скачан)
   - Кнопки скачивания для каждого артефакта

3. **Детальная информация** (при клике на артефакт):
   - Полное описание артефакта
   - Информация о связанном уровне
   - Метаданные файла (тип, размер, дата добавления)
   - История скачиваний (если применимо)

## Проверка работы

Для проверки корректности реализации страницы артефактов выполните:
- Тестирование отображения списка артефактов с различными фильтрами
- Проверка работы поиска и сортировки
- Тестирование процесса скачивания файлов разных типов и размеров
- Проверка корректности отслеживания скачанных артефактов
- Тестирование доступности артефактов в соответствии с правами доступа

## Ожидаемый результат

- Полностью функциональная страница для работы с артефактами
- Система фильтрации и поиска артефактов
- Механизм скачивания файлов с отображением прогресса
- Отслеживание скачанных артефактов для статистики

## Дополнительные материалы

- [Фильтрация и поиск в React](https://www.smashingmagazine.com/2020/02/javascript-smart-filter-search-functionality-react/)
- [Виртуализация списков в React](https://react-window.vercel.app/)
- [Прогресс-бар для скачивания](https://github.com/axios/axios#browser)
- [Примеры UI для файловых библиотек](https://dribbble.com/tags/file_library)
- [Supabase Storage и политики доступа](https://supabase.com/docs/guides/storage/security)

## После выполнения

После завершения задачи не забудьте обновить файл [status.md](../docs/status.md) с информацией о реализованной странице артефактов, системе фильтрации и любых возникших проблемах при разработке функционала скачивания файлов. 
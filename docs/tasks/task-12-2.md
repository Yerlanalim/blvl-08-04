# Задача 12.2: Управление уровнями и контентом

## Подготовка
Перед началом работы ознакомьтесь с документами, чтобы восстановить контекст проекта:
- [Статус проекта](../docs/status.md)
- [План разработки](../docs/development-plan.md)
- [Концепция проекта](../docs/bizlevel-concept.md)

## Описание задачи
После создания базовой административной панели необходимо реализовать функциональность для управления содержимым платформы, включая уровни, видео-уроки, тесты, артефакты и FAQ. Эта функциональность позволит администраторам создавать, редактировать и удалять образовательный контент без необходимости прямого взаимодействия с базой данных.

### Основные требования:
1. Создание интерфейса для управления уровнями:
   - Разработка страницы со списком всех уровней с возможностью сортировки и фильтрации
   - Реализация формы для создания нового уровня с указанием названия, описания, порядкового номера, статуса и цены
   - Создание страницы редактирования существующего уровня
   - Реализация функции удаления уровня с подтверждением (с проверкой зависимостей)
   - Добавление возможности изменения порядка уровней и их статуса (опубликован/черновик)

2. Реализация CRUD операций для видео и тестов:
   - Создание страницы управления видео внутри уровня
   - Разработка формы для добавления нового видео с указанием YouTube-URL, названия и описания
   - Реализация интерфейса для создания и редактирования тестов, связанных с видео
   - Добавление функции для управления вопросами в тестах и вариантами ответов
   - Создание предпросмотра теста для проверки правильности настройки

3. Добавление управления артефактами и FAQ:
   - Разработка интерфейса для загрузки и управления артефактами (файлами)
   - Создание загрузчика файлов с интеграцией Supabase Storage
   - Реализация управления мета-информацией артефактов (название, описание, связь с уровнями)
   - Добавление страницы для управления FAQ с возможностью создания, редактирования и удаления вопросов/ответов
   - Создание формы редактирования с поддержкой форматирования текста (rich text)

4. Реализация предпросмотра контента:
   - Добавление функции предпросмотра уровня в том виде, как его увидят пользователи
   - Реализация предпросмотра видео и тестов
   - Создание возможности тестового прохождения уровня администратором
   - Добавление функции временного отключения уровня от публичного доступа для редактирования

## Технические детали
- Используйте react-hook-form и zod для создания и валидации форм
- Для загрузки файлов интегрируйте Supabase Storage API
- Используйте оптимистичные обновления для улучшения UX при редактировании
- Для редактора rich text можно использовать библиотеку TipTap или аналогичную
- Обеспечьте правильное взаимодействие между связанными сущностями (например, при удалении уровня должны учитываться зависимости)

## Проверки и тестирование
- Протестируйте полный цикл CRUD операций для всех типов контента
- Проверьте правильность валидации форм и обработки ошибок
- Убедитесь, что загрузка артефактов работает корректно и файлы сохраняются в Supabase Storage
- Проверьте предпросмотр и тестовое прохождение уровня
- Протестируйте редактор rich text для FAQ и описаний

## Завершение задачи
После выполнения задачи:
1. Обновите файл [status.md](../docs/status.md) с подробным описанием реализованных функций управления контентом
2. Убедитесь, что все формы имеют корректную валидацию и обрабатывают ошибки
3. Проверьте связи между различными типами контента и корректность их обновления
4. Составьте краткую инструкцию по использованию системы управления контентом для будущих администраторов 